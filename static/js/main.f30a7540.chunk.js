(this.webpackJsonpstockmanagerment=this.webpackJsonpstockmanagerment||[]).push([[0],{288:function(e,t,c){},289:function(e,t,c){},291:function(e,t,c){},316:function(e,t){},332:function(e,t){},334:function(e,t){},344:function(e,t){},346:function(e,t){},371:function(e,t){},373:function(e,t){},374:function(e,t){},379:function(e,t){},381:function(e,t){},400:function(e,t){},412:function(e,t){},415:function(e,t){},420:function(e,t){},422:function(e,t){},445:function(e,t){},536:function(e,t,c){},544:function(e,t,c){"use strict";c.r(t);var n=c(4),i=c(1),o=c.n(i),s=c(23),a=c.n(s),r=(c(288),c.p,c(289),c(166)),l=c.n(r),d=c(72),u=c(266),j=c(53),m=c(36),b=(c(291),c(267)),h=c.n(b),g=Object(i.createContext)(),O=function(e){var t=e.reducer,c=e.initialState,o=e.children;return Object(n.jsx)(g.Provider,{value:Object(i.useReducer)(t,c),children:o})},v=function(){return Object(i.useContext)(g)};function f(e){if(e.length>2){var t=(10*parseInt(e)).toLocaleString("en-US",{style:"decimal",currency:"USD"});return t=t.substring(0,t.length-1)}return e}function p(){var e=new Date;return[e.getDate(),e.getMonth()+1,e.getFullYear()]}var x=function(){var e,t,o="https://bgdatafeed.vps.com.vn/",s=Object(i.useState)("Begin"),a=Object(m.a)(s,2),r=a[0],b=a[1],g=Object(i.useState)([]),O=Object(m.a)(g,2),p=O[0],x=O[1],y=Object(i.useState)([]),S=Object(m.a)(y,2),k=S[0],P=S[1],N=v(),C=Object(m.a)(N,2),I=(C[0].currentstockprice,C[1]),A=["TCM","HPG","VGT","BID","DXG"],B=Object(i.useState)(!1),w=Object(m.a)(B,2),D=w[0],T=w[1],E=Object(i.useState)(!1),U=Object(m.a)(E,2),F=U[0],M=U[1];function K(){c(184)({method:"GET",url:"https://bgapidatafeed.vps.com.vn/getlistindexdetail/10"},(function(e,t,c){if(e)throw new Error(e);var n=Object(j.a)({},k);void 0!==c&&(n.idx=JSON.parse(c)[0].cIndex,n.idxchg=JSON.parse(c)[0].ot.split("|")[0],n.idxpct=JSON.parse(c)[0].ot.split("|")[1],n.tval=JSON.parse(c)[0].ot.split("|")[2],n.tvol=JSON.parse(c)[0].vol,P(n))}))}function _(){return(_=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c(184),n={method:"GET",url:"https://bgapidatafeed.vps.com.vn/getliststockdata/"+A.join(",")},e.next=4,t(n,(function(e,t,c){if(e)throw new Error(e);x(JSON.parse(c)),T(!0)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return e===t.f?"txt-gia-san":e===t.c?"txt-gia-tran":e<t.r?"txt-gia-thap":e>t.r?"txt-gia-cao":"txt-gia-tc"}function V(){var t='{"action":"join","list":"'+A.join(",")+'"}';e.emit("regs",t),e.on("board",(function(e){!function(e){if(!0===D&&3210===e.id){var t=p,c=A.indexOf(e.sym),n=Object(j.a)({},p[c]);"B"===e.side?(n.g1=e.g1,n.g2=e.g2,n.g3=e.g3):(n.g4=e.g1,n.g5=e.g2,n.g6=e.g3),t[c]=n,x(Object(d.a)(t))}}(e.data)})),e.on("index",(function(e){})),e.on("stock",(function(e){!function(e){if(!0===D){var t=new Date,c=t.getHours(),n=t.getMinutes(),i=t.getSeconds(),o=p,s=A.indexOf(e.sym);b(c+":"+n+":"+i+": "+JSON.stringify(e)),I({type:"UPDATE_TO_CURRENTSTOCKPRICE",item:{sym:e.sym,lastPrice:e.lastPrice}});var a=Object(j.a)({},p[s]);a.ot!==e.change&&(a.ot=e.change,G("#"+e.sym+"-ot")),a.lastPrice!==e.lastPrice&&(a.lastPrice=e.lastPrice,G("#"+e.sym+"-lastPrice")),a.lastVolume!==e.lastVol&&(a.lastVolume=e.lastVol,G("#"+e.sym+"-lastVolume")),a.changePc!==e.changePc&&(a.changePc=e.changePc,G("#"+e.sym+"-changePc")),a.lot!==e.totalVol&&(a.lot=e.totalVol,G("#"+e.sym+"-lot")),a.highPrice=e.hp,a.lowPrice=e.lp,o[s]=a,x(Object(d.a)(o));new Date}}(e.data)}))}function G(e){var t=document.querySelector(e);console.log(t),t.classList.replace("backgroundwhite","backgroundgray");setTimeout((function(){t.classList.replace("backgroundgray","backgroundwhite")}),3e3)}return Object(i.useEffect)((function(){console.log("init stock items"),function(){_.apply(this,arguments)}(),K()}),[]),Object(i.useEffect)((function(){!0===D&&(console.log(p),function(){if(null==e||"undefined"===typeof e)e=h()(o),console.log("initial websocket"),e.on("connect",(function(e){console.log("CONNECT"),M(!0);var t=document.querySelector("#connectioncircle");console.log(t),t.style.backgroundColor="blue";var c=setTimeout((function(){M(!1)}),3e3);return function(){return clearTimeout(c)}}));else if(null!=A&&"undefined"!==typeof A){var t='{"action":"leave","list":"'+A.join(",")+'"}';e.emit("regs",t)}e.on("disconnect",(function(){e.removeAllListeners(),M(!1),document.querySelector("#connectioncircle").style.backgroundColor="gray"})),e.on("connect_error",(function(){})),e.on("reconnect_error",(function(){})),e.on("reconnect",(function(){V()}))}(),V())}),[D]),Object(i.useEffect)((function(){p.map((function(e){return I({type:"UPDATE_TO_CURRENTSTOCKPRICE",item:{sym:e.sym,lastPrice:e.lastPrice}})}))}),[D]),function(e,t){var c=Object(i.useRef)();Object(i.useEffect)((function(){c.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){c.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){K(),console.log("index update",Date())}),6e4),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"VNIndexContent",style:{color:k.idxchg<0?"red":"blue"},children:[Object(n.jsxs)("div",{className:"VnIndex",children:[" ",void 0!==k.idx?parseFloat(k.idx).toLocaleString("en-US",{style:"decimal",currency:"USD"}):"0"," "]}),Object(n.jsxs)("div",{className:"VnIndex",children:["      ",void 0!==k.idxchg?k.idxchg:"0","   "]}),Object(n.jsxs)("div",{className:"VnIndex",children:[void 0!==k.tval?parseInt(k.tval).toLocaleString("en-US",{style:"decimal",currency:"USD"}):"0"," "]}),Object(n.jsxs)("div",{children:[" ",Object(n.jsx)("a",{className:"connection-circle notconnected",id:"connectioncircle"})," "]})]}),Object(n.jsx)("div",{className:"realtime",children:(t=p,t&&t.map((function(e,t){return Object(n.jsxs)("div",{className:"stockCard",children:[Object(n.jsxs)("div",{className:"stockCard__Header "+L(e.lastPrice,e),id:e.sym,children:[Object(n.jsx)("div",{children:e.sym}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-ot",children:e.ot}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-lastPrice",children:e.lastPrice}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-lastVolume",children:f(e.lastVolume.toString())}),Object(n.jsxs)("div",{className:"backgroundwhite",id:e.sym+"-changePc",children:[e.changePc,"%"]}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-lot",children:f(e.lot.toString())})]}),Object(n.jsxs)("div",{className:"stockCard__Buy",children:[Object(n.jsxs)("div",{className:"BuyAmount",children:[Object(n.jsx)("div",{children:"Amount"})," ",Object(n.jsx)("div",{children:"Price"})]}),Object(n.jsxs)("div",{className:"BuyAmount "+L(e.g1.split("|")[0],e),id:e.sym+"-g1",children:[Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g1-vol",children:f(e.g1.split("|")[1])}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g1-price",children:e.g1.split("|")[0]})]}),Object(n.jsxs)("div",{className:"BuyAmount "+L(e.g2.split("|")[0],e),id:e.sym+"-g2",children:[Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g2-vol",children:f(e.g2.split("|")[1])}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g2-price",children:e.g2.split("|")[0]})]}),Object(n.jsxs)("div",{className:"BuyAmount backgroundwhite "+L(e.g3.split("|")[0],e),id:e.sym+"-g3",children:[Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g3-vol",children:f(e.g3.split("|")[1])}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g3-price",children:e.g3.split("|")[0]})]}),Object(n.jsxs)("div",{className:"BuyAmount backgroundwhite "+L(e.lowPrice,e),style:{borderTopWidth:1,borderTopColor:"#A9A9A9",borderTopStyle:"solid"},children:[Object(n.jsx)("div",{children:"Min"})," ",Object(n.jsx)("div",{children:e.lowPrice})]})]}),Object(n.jsxs)("div",{className:"stockCard__Sell",children:[Object(n.jsxs)("div",{className:"BuyAmount",children:[Object(n.jsx)("div",{children:"Amount"})," ",Object(n.jsx)("div",{children:"Price"})]}),Object(n.jsxs)("div",{className:"SellAmount "+L(e.g4.split("|")[0],e),id:e.sym+"-g4",children:[Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g4-vol",children:f(e.g4.split("|")[1])}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g4-price",children:e.g4.split("|")[0]})]}),Object(n.jsxs)("div",{className:"SellAmount "+L(e.g5.split("|")[0],e),id:e.sym+"-g5",children:[Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g5-vol",children:f(e.g5.split("|")[1])}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g5-price",children:e.g5.split("|")[0]})]}),Object(n.jsxs)("div",{className:"SellAmount "+L(e.g6.split("|")[0],e),id:e.sym+"-g6",children:[Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g6-vol",children:f(e.g6.split("|")[1])}),Object(n.jsx)("div",{className:"backgroundwhite",id:e.sym+"-g6-price",children:e.g6.split("|")[0]})]}),Object(n.jsxs)("div",{className:"BuyAmount backgroundwhite "+L(e.highPrice,e),style:{borderTopWidth:1,borderTopColor:"#A9A9A9",borderTopStyle:"solid"},children:[Object(n.jsx)("div",{children:"Max"})," ",Object(n.jsx)("div",{children:e.highPrice})]})]})]},t)})))}),Object(n.jsx)("div",{className:"jsonValue",children:r}),Object(n.jsx)("div",{className:F?"alert alert-success connection-alert connected-alert text-center fadeIn":"fadeOut",children:Object(n.jsx)("strong",{children:"Connected!"})})]})},y=c(268),S=c(25),k=(c(536),c(269).a.initializeApp({apiKey:"AIzaSyDl0oKQRCOHexa-EloSX_pJFN-lkSqibtc",authDomain:"stockrealtime-5c049.firebaseapp.com",databaseURL:"https://stockrealtime-5c049.firebaseio.com",projectId:"stockrealtime-5c049",storageBucket:"stockrealtime-5c049.appspot.com",messagingSenderId:"144010414262",appId:"1:144010414262:web:322dbb3aa4889756587e17",measurementId:"G-J2YJH55K7K"}).firestore()),P=k.collection("Stocks"),N=k,C=c(588),I=c(585),A=c(577),B=c(586),w=c(589),D=c(584),T=c(583),E=c(582);function U(e){var t=o.a.useState(!1),c=Object(m.a)(t,2),i=c[0],s=c[1];var a=function(){s(!1);var t=parseFloat(document.getElementById("StockID").value);isNaN(t)||P.where("MaCK","==",e.stockitem.MaCK).where("IsSold","==",!1).where("Amount","==",e.stockitem.Amount).where("BoughtPrice","==",e.stockitem.BoughtPrice).onSnapshot((function(c){c.docs.map((function(c){!function(e,t,c,n){var i=P.doc(e);i.get().then((function(e){e.exists?i.update({SoldPrice:t,DaySold:p()[0],MonthSold:p()[1],YearSold:p()[2],IsSold:!0,Gain:c,Percent:n}):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))}(c.id,t,r(e.stockitem.BoughtPrice,t,e.stockitem.Amount)[0],r(e.stockitem.BoughtPrice,t,e.stockitem.Amount)[1])}))}))};function r(e,t,c){var n=(1e3*parseFloat(t)-1e3*parseFloat(e))*c-(parseFloat(e)+parseFloat(t))*c*2-parseFloat(t)*c;return[n,(n/(10*parseFloat(e)*c)).toFixed(2)+"%"]}return Object(n.jsxs)("div",{children:[Object(n.jsx)(A.a,{variant:"outlined",style:{fontSize:"12px"},size:"small",onClick:function(){s(!0)},children:"Sell"}),Object(n.jsxs)(w.a,{open:i,onClose:a,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,children:[Object(n.jsx)(E.a,{id:"form-dialog-title",children:"Sell Price"}),Object(n.jsx)(T.a,{children:Object(n.jsx)(B.a,{id:"StockID",autoFocus:!0,margin:"dense",label:"Sell Price",type:"email",fullWidth:!0})}),Object(n.jsxs)(D.a,{children:[Object(n.jsx)(A.a,{onClick:function(){s(!1)},color:"primary",children:"Cancel"}),Object(n.jsx)(A.a,{onClick:a,color:"primary",children:"Submit"})]})]})]})}var F=function(){var e=Object(i.useState)([]),t=Object(m.a)(e,2),c=t[0],o=t[1],s=Object(i.useState)([]),a=Object(m.a)(s,2),r=a[0],l=a[1],d=Object(i.useState)([]),u=Object(m.a)(d,2),j=u[0],b=u[1],h=Object(i.useState)(!1),g=Object(m.a)(h,2),O=g[0],f=g[1],x=v(),y=Object(m.a)(x,2),S=y[0].currentstockprice;y[1],Object(i.useEffect)((function(){N.collection("Stocks").orderBy("MaCK").onSnapshot((function(e){o(e.docs.map((function(e){return e.data()})))}))}),[]),Object(i.useEffect)((function(){var e=null===c||void 0===c?void 0:c.filter((function(e){return!1===e.IsSold})).map((function(e){return{MaCK:e.MaCK,SoldPrice:e.SoldPrice,BoughtPrice:e.BoughtPrice,Amount:e.Amount,Gain:e.Gain,Percent:e.Percent,IsSold:e.IsSold}}));l(e.sort((function(e,t){return e.MaCK.localeCompare(t.MaCK)}))),e=null===c||void 0===c?void 0:c.filter((function(e){return!0===e.IsSold})).map((function(e){return{MaCK:e.MaCK,SoldPrice:e.SoldPrice,BoughtPrice:e.BoughtPrice,Amount:e.Amount,Gain:e.Gain,Percent:e.Percent,IsSold:e.IsSold}})),b(e)}),[c]);var k=j.reduce((function(e,t){return e+D(t.BoughtPrice,t.SoldPrice,t.Amount)[0]}),0),P=r.reduce((function(e,t){var c;return e+D(t.BoughtPrice,null===(c=S[S.findIndex((function(e){return e.sym===t.MaCK}))])||void 0===c?void 0:c.lastPrice,t.Amount)[0]}),0),w=r.reduce((function(e,t){return e+t.BoughtPrice*t.Amount*1e3}),0);function D(e,t,c){var n=(1e3*parseFloat(t)-1e3*parseFloat(e))*c-(parseFloat(e)+parseFloat(t))*c*2-parseFloat(t)*c;return[n,(n/(10*parseFloat(e)*c)).toFixed(2)+"%"]}var T=function(e){return e&&e.map((function(e,t){var c,i,o;return Object(n.jsxs)("div",{className:"stocks",children:[Object(n.jsx)("div",{className:"mack",children:e.MaCK}),Object(n.jsx)("div",{className:"buyprice",children:e.BoughtPrice}),Object(n.jsx)("div",{className:"sell",children:e.IsSold?e.SoldPrice:null===(c=S[S.findIndex((function(t){return t.sym===e.MaCK}))])||void 0===c?void 0:c.lastPrice}),Object(n.jsx)("div",{className:"Amount",children:e.Amount.toLocaleString("en-US",{style:"decimal",currency:"USD"})}),Object(n.jsx)("div",{className:"lailo",children:e.IsSold?e.Gain.toLocaleString("en-US",{style:"decimal",currency:"USD"}):D(e.BoughtPrice,null===(i=S[S.findIndex((function(t){return t.sym===e.MaCK}))])||void 0===i?void 0:i.lastPrice,e.Amount)[0].toLocaleString("en-US",{style:"decimal",currency:"USD"})}),Object(n.jsx)("div",{className:"tyle",children:e.IsSold?e.Percent.toLocaleString("en-US",{style:"decimal",currency:"USD"}):D(e.BoughtPrice,null===(o=S[S.findIndex((function(t){return t.sym===e.MaCK}))])||void 0===o?void 0:o.lastPrice,e.Amount)[1].toLocaleString("en-US",{style:"decimal",currency:"USD"})}),Object(n.jsx)("div",{className:"sellbutton",children:e.IsSold?"":Object(n.jsx)(U,{stockitem:e})})]},t)}))};return Object(n.jsxs)("div",{className:"buysell",children:[Object(n.jsx)("div",{className:"addstockform",children:Object(n.jsxs)("form",{children:[Object(n.jsxs)("div",{className:"stockadd",children:[Object(n.jsx)("div",{children:Object(n.jsx)(B.a,{id:"StockCodeID",label:"Stock Code",style:{marginTop:5},placeholder:"0",variant:"outlined",size:"small",onChange:function(e){e.target.value=e.target.value.toUpperCase()}})}),Object(n.jsx)("div",{children:Object(n.jsx)(B.a,{id:"StockAmount",label:"Stock Amount",style:{marginTop:5},placeholder:"0",variant:"outlined",size:"small",onChange:function(e){}})}),Object(n.jsx)("div",{children:Object(n.jsx)(B.a,{id:"BuyPrice",label:"Buy Price",style:{marginTop:5},placeholder:"0",size:"small",variant:"outlined",onChange:function(e){}})})]}),Object(n.jsx)(A.a,{variant:"outlined",style:{marginTop:5,fontSize:"12px"},size:"small",onClick:function(e){e.preventDefault(),N.collection("Stocks").add({MaCK:document.getElementById("StockCodeID").value.toUpperCase(),SoldPrice:0,BoughtPrice:parseFloat(document.getElementById("BuyPrice").value),IsSold:!1,Amount:parseInt(document.getElementById("StockAmount").value),Gain:0,Percent:0,DayBought:p()[0],MonthBought:p()[1],YearBought:p()[2],DaySold:0,MonthSold:0,YearSold:0}),console.log(document.getElementById("StockCodeID").value),console.log(document.getElementById("StockAmount").value),console.log(document.getElementById("BuyPrice").value)},children:"Add Stock"})]})}),Object(n.jsxs)("div",{className:"buysell__title",children:[Object(n.jsx)("h2",{children:"Bought Stocks"}),T(r)]}),Object(n.jsxs)("div",{className:"total",children:[Object(n.jsx)("div",{className:"totalitemleft",children:P.toLocaleString("en-US",{style:"decimal",currency:"USD"})}),Object(n.jsx)("div",{className:"totalitemright",children:w.toLocaleString("en-US",{style:"decimal",currency:"USD"})}),Object(n.jsx)("div",{className:"totalpercent",children:(100*P/w).toFixed(2)+"%"})]}),Object(n.jsxs)("div",{className:"buysell__title",children:[Object(n.jsxs)("div",{className:"showbought",children:[Object(n.jsx)("h2",{children:"Sold Stocks"}),Object(n.jsx)("div",{className:"showlable",children:Object(n.jsx)(I.a,{control:Object(n.jsx)(C.a,{checked:O,onChange:function(){f(!O)},inputProps:{"aria-label":"secondary checkbox"},color:"primary"})})})]}),O?T(j):null,Object(n.jsx)("div",{className:"total",children:k.toLocaleString("en-US",{style:"decimal",currency:"USD"})})]})]})};var M=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(y.a,{children:Object(n.jsx)("div",{className:"app",children:Object(n.jsxs)(S.c,{children:[Object(n.jsx)(S.a,{path:"/StockManager",children:Object(n.jsx)(x,{})}),Object(n.jsx)(S.a,{path:"/Utils",children:Object(n.jsx)(x,{})}),Object(n.jsx)(S.a,{path:"/HistoryTransactions",children:Object(n.jsx)(x,{})}),Object(n.jsxs)(S.a,{path:"/",children:[Object(n.jsx)(x,{}),Object(n.jsx)(F,{})]})]})})})})},K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,591)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;c(e),n(e),i(e),o(e),s(e)}))},_=function(e,t){switch(t.type){case"ADD_TO_BASKET":return Object(j.a)(Object(j.a)({},e),{},{currentstockprice:[].concat(Object(d.a)(e.currentstockprice),[t.item])});case"UPDATE_TO_CURRENTSTOCKPRICE":var c=e.currentstockprice.findIndex((function(e){return e.sym===t.item.sym})),n=Object(d.a)(e.currentstockprice);return c>=0?n[c].lastPrice=t.item.lastPrice:n=[].concat(Object(d.a)(e.currentstockprice),[t.item]),Object(j.a)(Object(j.a)({},e),{},{currentstockprice:n});default:return e}};a.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(O,{initialState:{basket:["hungtd","tdhung"],user:null,currentstockprice:[]},reducer:_,children:Object(n.jsx)(M,{})})}),document.getElementById("root")),K()}},[[544,1,2]]]);
//# sourceMappingURL=main.f30a7540.chunk.js.map